# alldebrid-torrent-downloader
A Docker image which allows you to automatically download torrent on a specific FS using notify-tools via Alldebrid API. This need you to be premium for API key !
The image should work on multiple OS.

# HOW TO USE

Just build the docker image or go to my Dockerhub to download a prebuild image: https://hub.docker.com/r/monx/alldebrid-torrent-downloader

Launch the container:

```docker run -d --privileged --name=alldebrid-torrent-downloader -e "TOKEN=<YOURTOKEN>" -v <DOWNLOAD_FILE_PATH>:/downloads -v <WATCHING_FILES_PATH>:/watching -e "DELETE_MAGNET=<yes|no>" monx/alldebrid-torrent-downloader -e TVSHOWS=<yes|no>```

ENV Variables:
  - TOKEN = API key generated by yourself from your Alldebrid account (requires premium plan)
  - DELETE_MAGNET = yes or no. This will delete or not the magnet file at the end of the download.
  - TVSHOWS = "no" by default. Optional. Can create a new folder with the name of the downloaded torrent and a subdir with specific season number. Torrent name has to be like: tvshows.name.S{X-Y}.whatever.torrent. In this specific case, dir "tvshows.name" will be created and a subdir "S{X-Y}" (X and Y are season number like 01, 02, 03, etc...) with all files inside.
# HOW IT WORKS
The debian-slim based container launches a bash script which gonna check if the alldebrid magnets service is UP, if the service is not available (happens sometimes), you will see in the container's log a message that will indicates you:
```
Alldebrid Magnets service seems to be down for now (HTTP returns 302)
Confirm by visiting this link: https://alldebrid.fr/magnets/
Next retry in 5min...
```

If the service is well up, the torrent file will disappears and the file will be be downloaded at the exact same place than your torrents place.

This has been made for me and has been made quickly and dirty.
Feel free to collaborate !

**Note: The actual version needs to be launch as privileged container because of permission on Linux File System.**


# TODO

- Find a better way to check if the service is available ?
- ~~Handle with special characters during basename file to delete torrent file~~
- ~~Handle magent composed of several files~~
- handle API key errors
